services:
  - type: web
    name: inventory-backend
    env: node
    region: frankfurt
    plan: free
    buildCommand: |
      cd server && 
      npm install && 
      npx prisma generate && 
      npm run build
    startCommand: |
      cd server &&
      npx prisma migrate deploy && 
      npx ts-node prisma/seed.ts && 
      node dist/src/index.js
    envVars:
      - key: DATABASE_URL
        sync: false